<UserControl x:Class="Hearthstone_Deck_Tracker.Controls.Stats.Arena.ArensStatsSummaryClasses"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:stats="clr-namespace:Hearthstone_Deck_Tracker.Stats"
             xmlns:arena="clr-namespace:Hearthstone_Deck_Tracker.Controls.Stats.Arena"
             xmlns:converters="clr-namespace:Hearthstone_Deck_Tracker.Controls.Stats.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <converters:ToUpperValueConverter x:Key="ToUpperValueConverter"/>
    </UserControl.Resources>
    <StackPanel>
        <Expander Width="280">
            <Expander.Header>
                <DockPanel>
                    <TextBlock Foreground="White" Text="TOTAL" DockPanel.Dock="Left"/>
                    <TextBlock Foreground="White" Margin="0,0,10,0" HorizontalAlignment="Right">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0} wins average | {1}% winrate">
                                <Binding Path="ArenaAllClasses.AverageWins" Source="{x:Static stats:CompiledStats.Instance}" IsAsync="True"/>
                                <Binding Path="ArenaAllClasses.WinRatePercent" Source="{x:Static stats:CompiledStats.Instance}" IsAsync="True"/>
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </DockPanel>
            </Expander.Header>
            <arena:ArenaClassStats DataContext="{Binding Path=ArenaAllClasses, Source={x:Static stats:CompiledStats.Instance}, IsAsync=True}"/>
        </Expander>
        <ItemsControl ItemsSource="{Binding Path=ArenaClasses, Source={x:Static stats:CompiledStats.Instance}, IsAsync=True}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Expander Width="280">
                        <Expander.Header>
                            <DockPanel>
                                <TextBlock Foreground="White" Text="{Binding Path=Class, Converter={StaticResource ToUpperValueConverter}, IsAsync=True}" DockPanel.Dock="Left"/>
                                <TextBlock Foreground="White" Margin="0,0,10,0" HorizontalAlignment="Right">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0} wins average | {1}% winrate">
                                            <Binding Path="AverageWins" />
                                            <Binding Path="WinRatePercent" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </DockPanel>
                        </Expander.Header>
                        <arena:ArenaClassStats DataContext="{Binding Path=., IsAsync=True}"/>
                    </Expander>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</UserControl>
